---
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import Layout from "@layouts/Layout.astro";
import dayjs from "dayjs";

interface Props {
  blog: CollectionEntry<"blogs">;
}

export async function getStaticPaths() {
  const blogPosts = await getCollection("blogs");
  return blogPosts.map((blog: any) => ({
    params: { slug: blog.slug },
    props: { blog },
  }));
}
const { blog } = Astro.props;
const { Content } = await blog.render();
---

<Layout>
  <div class="w-full px-4">
    <div class="mt-5 md:mt-16 mb-10 md:mb-10">
      <figure
        class="flex justify-center bd-base-300 rounded-2xl border-neutral border md:max-w-4xl m-auto shadow-2xl"
      >
        <Image
          src={blog.data.cover}
          alt={blog.data.title}
          class="object-cover object-center !m-0 aspect-video block rounded-2xl shadow-2xl"
        />
      </figure>
    </div>

    <article class="prose mx-auto">
      <h1 class="md:!text-5xl md:!leading-[1.2] font-medium mb-0">
        {blog.data.title}
      </h1>
      <span class="divider m-0"></span>
      <time>{dayjs(blog.data.date).format("MMMM DD, YYYY")}</time>
      <p class="lead">{blog.data.description}</p>
      <Content />
    </article>
    <span class="h-52"></span>
  </div>
</Layout>
